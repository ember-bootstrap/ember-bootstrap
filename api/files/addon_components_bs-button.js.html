<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>addon/components/bs-button.js - ember-bootstrap</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../assets/css/api.css">
  <script type="text/javascript" src="//use.typekit.net/dkq5epu.js"></script>
  <script type="text/javascript">
    try {
      Typekit.load();
    } catch(e) {
    }
  </script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
  <link rel="shortcut icon" href="//kaliber5.github.io/ember-bootstrap/favicon.ico">
</head>
<body class="yui3-skin-sam">
<div class="navbar navbar-dark navbar-expand-lg bg-primary">
  <div class="container">
    <a href="/" class="navbar-brand">ember-bootstrap</a>
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".js-navbar-collapse">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse js-navbar-collapse">
      <ul class="navbar-nav nav mr-auto">
        <li class="navbar-nav"><a class="nav-link" href="/#/getting-started">Getting Started</a></li>
        <li class="navbar-nav"><a class="nav-link" href="/#/components">Components</a></li>
        <li class="navbar-nav"><a class="nav-link" href="/api">API</a></li>
        <li class="navbar-nav"><a class="nav-link" href="/#/addons">Addons</a></li>
      </ul>
      <ul class="navbar-nav nav">
        <li class="navbar-nav"><a class="nav-link" href="https://github.com/kaliber5/ember-bootstrap" target="_blank"><i
          class="fab fa-github"></i></a></li>
        <li class="navbar-nav"><a class="nav-link" href="https://twitter.com/simonihmig" target="_blank"><i
          class="fab fa-twitter"></i></a>
        </li>
        <li class="navbar-nav">
          <div class="navbar-text">
            <iframe src="https://ghbtns.com/github-btn.html?user=kaliber5&repo=ember-bootstrap&type=star&count=true"
                    frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <div class="apidocs">
        <div id="docs-main">
          <div class="content">
<div class="page-header">
    <h1>addon/components/bs-button.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
import { tracked } from &#x27;@glimmer/tracking&#x27;;
import { action } from &#x27;@ember/object&#x27;;
import Component from &#x27;@glimmer/component&#x27;;
import arg from &#x27;ember-bootstrap/utils/decorators/arg&#x27;;
import deprecateSubclassing from &#x27;ember-bootstrap/utils/deprecate-subclassing&#x27;;

/**
  Implements a HTML button element, with support for all [Bootstrap button CSS styles](http://getbootstrap.com/css/#buttons)
  as well as advanced functionality such as button states.

  ### Basic Usage

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton @type=&quot;primary&quot; @icon=&quot;glyphicon glyphicon-download&quot;&gt;
    Downloads
  &lt;/BsButton&gt;
  &#x60;&#x60;&#x60;

  ### Actions

  Use the &#x60;onClick&#x60; property of the component to send an action to your controller. It will receive the button&#x27;s value
  (see the &#x60;value&#x60; property) as an argument.

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton @type=&quot;primary&quot; @icon=&quot;glyphicon glyphicon-download&quot; @onClick=(action &quot;download&quot;)&gt;
    Downloads
  &lt;/BsButton&gt;
  &#x60;&#x60;&#x60;

  ### Promise support for automatic state change

  When returning a Promise for any asynchronous operation from the &#x60;onClick&#x60; closure action the button will
  manage an internal state (&quot;default&quot; &gt; &quot;pending&quot; &gt; &quot;fulfilled&quot;/&quot;rejected&quot;) automatically.

  The button is disabled by default if it&#x27;s in pending state. You could override this behavior by passing
  the &#x60;disabled&#x60; HTML attribute or by setting &#x60;@preventConcurrency&#x60; to false.

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton
    disabled={{false}}
  /&gt;
  &#x60;&#x60;&#x60;

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton
    @preventConcurrency={{false}}
  /&gt;
  &#x60;&#x60;&#x60;

  The label could be changed automatically according to the state of the promise with &#x60;@defaultText&#x60;,
  &#x60;@pendingText&#x60;, &#x60;@fulfilledText&#x60; and &#x60;@rejectedText&#x60; arguments:

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton
    @type=&quot;primary&quot;
    @icon=&quot;glyphicon glyphicon-download&quot;
    @defaultText=&quot;Download&quot;
    @pendingText=&quot;Loading...&quot;
    @fulfilledText=&quot;Completed!&quot;
    @rejectedText=&quot;Oups!?&quot;
    @onClick={{this.download}}
  /&gt;
  &#x60;&#x60;&#x60;

  &#x60;&#x60;&#x60;js
  // controller.js
  import { Controller } from &#x27;@ember/controller&#x27;;
  import { action } from &#x27;@ember/object&#x27;;

  export default class MyController extends Controller {
    @action
    download(value) {
      return new Promise(...);
    }
  });
  &#x60;&#x60;&#x60;

  For further customization &#x60;isPending&#x60;, &#x60;isFulfilled&#x60;, &#x60;isRejected&#x60; and &#x60;isSettled&#x60; properties are yielded:

  &#x60;&#x60;&#x60;hbs
  &lt;BsButton @onClick=(action &quot;download&quot;) as |button|&gt;
    Download
    {{#if button.isPending}}
      &lt;span class=&quot;loading-spinner&quot;&gt;&lt;/span&gt;
    {{/if}}
  &lt;/BsButton&gt;
  &#x60;&#x60;&#x60;

  You can &#x60;reset&#x60; the state represented by these properties and used for button&#x27;s text by setting &#x60;reset&#x60; property to
  &#x60;true&#x60;.

  *Note that only invoking the component in a template as shown above is considered part of its public API. Extending from it (subclassing) is generally not supported, and may break at any time.*

  @class Button
  @namespace Components
  @extends Glimmer.Component
  @public
*/
@deprecateSubclassing
export default class Button extends Component {
  /**
   * Default label of the button. Not need if used as a block component
   *
   * @property defaultText
   * @type string
   * @public
   */

  /**
   * Label of the button used if &#x60;onClick&#x60; event has returned a Promise which is pending.
   * Not considered if used as a block component.
   *
   * @property pendingText
   * @type string
   * @public
   */

  /**
   * Label of the button used if &#x60;onClick&#x60; event has returned a Promise which succeeded.
   * Not considered if used as a block component.
   *
   * @property fulfilledText
   * @type string
   * @public
   */

  /**
   * Label of the button used if &#x60;onClick&#x60; event has returned a Promise which failed.
   * Not considered if used as a block component.
   *
   * @property rejectedText
   * @type string
   * @public
   */

  /**
   * Property to disable the button only used in internal communication
   * between Ember Boostrap components.
   *
   * @property _disabled
   * @type ?boolean
   * @default null
   * @private
   */

  get __disabled() {
    if (this.args._disabled !== undefined) {
      return this.args._disabled;
    }

    return this.isPending &amp;&amp; this.args.preventConcurrency !== false;
  }

  /**
   * Set the type of the button, either &#x27;button&#x27; or &#x27;submit&#x27;
   *
   * @property buttonType
   * @type String
   * @default &#x27;button&#x27;
   * @deprecated
   * @public
   */
  @arg buttonType = &#x27;button&#x27;;

  /**
   * Set the &#x27;active&#x27; class to apply active/pressed CSS styling
   *
   * @property active
   * @type boolean
   * @default false
   * @public
   */

  /**
   * Property for block level buttons (BS3 and BS4 only!)
   *
   * See the [Bootstrap docs](http://getbootstrap.com/css/#buttons-sizes)
   * @property block
   * @type boolean
   * @default false
   * @public
   */
  @arg block = false;

  /**
   * A click event on a button will not bubble up the DOM tree if it has an &#x60;onClick&#x60; action handler. Set to true to
   * enable the event to bubble
   *
   * @property bubble
   * @type boolean
   * @default false
   * @public
   */

  /**
   * If button is active and this is set, the icon property will match this property
   *
   * @property iconActive
   * @type String
   * @public
   */

  /**
   * If button is inactive and this is set, the icon property will match this property
   *
   * @property iconInactive
   * @type String
   * @public
   */

  /**
   * Class(es) (e.g. glyphicons or font awesome) to use as a button icon
   * This will render a &lt;i class=&quot;{{icon}}&quot;&gt;&lt;/i&gt; element in front of the button&#x27;s label
   *
   * @property icon
   * @type String
   * @public
   */
  get icon() {
    return this.args.icon || (this.args.active ? this.args.iconActive : this.args.iconInactive);
  }

  /**
   * Supply a value that will be associated with this button. This will be sent
   * as a parameter of the default action triggered when clicking the button
   *
   * @property value
   * @type any
   * @public
   */

  /**
   * Controls if &#x60;onClick&#x60; action is fired concurrently. If &#x60;true&#x60; clicking button multiple times will not trigger
   * &#x60;onClick&#x60; action if a Promise returned by previous click is not settled yet.
   *
   * This does not affect event bubbling.
   *
   * @property preventConcurrency
   * @type Boolean
   * @default true
   * @public
   */

  /**
   * State of the button. The button&#x27;s label (if not used as a block component) will be set to the
   * &#x60;&lt;state&gt;Text&#x60; property.
   * This property will automatically be set when using a click action that supplies the callback with a promise.
   * Possible values are: &quot;default&quot; &gt; &quot;pending&quot; &gt; &quot;fulfilled&quot; / &quot;rejected&quot;.
   * It could be resetted by &#x60;reset&#x60; property.
   *
   * @property state
   * @type String
   * @default &#x27;default&#x27;
   * @private
   */
  @tracked _state = &#x27;default&#x27;;
  get state() {
    return this.args.state ?? this._state;
  }
  set state(state) {
    this._state = state;
  }

  /**
   * Promise returned by &#x60;onClick&#x60; event is pending.
   *
   * @property isPending
   * @type Boolean
   * @private
   */
  get isPending() {
    return this.state === &#x27;pending&#x27;;
  }

  /**
   * Promise returned by &#x60;onClick&#x60; event has been succeeded.
   *
   * @property isFulfilled
   * @type Boolean
   * @private
   */
  get isFulfilled() {
    return this.state === &#x27;fulfilled&#x27;;
  }

  /**
   * Promise returned by &#x60;onClick&#x60; event has been rejected.
   *
   * @property isRejected
   * @type Boolean
   * @private
   */
  get isRejected() {
    return this.state === &#x27;rejected&#x27;;
  }

  /**
   * Promise returned by &#x60;onClick&#x60; event has been succeeded or rejected.
   *
   * @property isSettled
   * @type Boolean
   * @private
   */
  get isSettled() {
    return this.isFulfilled || this.isRejected;
  }

  /**
   * Set this to &#x60;true&#x60; to reset the &#x60;state&#x60;. A typical use case is to bind this attribute with ember-data isDirty flag.
   *
   * The old value is not taken into consideration. Setting a &#x60;true&#x60; value to &#x60;true&#x60; again will also reset &#x60;state&#x60;.
   * In that case it&#x27;s even to notify the observer system that the property has changed by calling
   * [&#x60;notifyPropertyChange()&#x60;](https://www.emberjs.com/api/ember/3.2/classes/EmberObject/methods/notifyPropertyChange?anchor=notifyPropertyChange).
   *
   * @property reset
   * @type boolean
   * @public
   */

  /**
   * Property for size styling, set to &#x27;lg&#x27;, &#x27;sm&#x27; or &#x27;xs&#x27;
   *
   * Also see the [Bootstrap docs](https://getbootstrap.com/docs/4.3/components/buttons/#sizes)
   *
   * @property size
   * @type String
   * @public
   */

  /**
   * Property for type styling
   *
   * For the available types see the [Bootstrap docs](https://getbootstrap.com/docs/4.3/components/buttons/)
   *
   * @property type
   * @type String
   * @default &#x27;secondary&#x27;
   * @public
   */

  /**
   * Property to create outline buttons (BS4+ only)
   *
   * @property outline
   * @type boolean
   * @default false
   * @public
   */

  /**
   * When clicking the button this action is called with the value of the button (that is the value of the &quot;value&quot; property).
   *
   * Return a promise object, and the buttons state will automatically set to &quot;pending&quot;, &quot;resolved&quot; and/or &quot;rejected&quot;.
   * This could be used to automatically set the button&#x27;s text depending on promise state (&#x60;defaultText&#x60;, &#x60;pendingText&#x60;,
   * &#x60;fulfilledText&#x60;, &#x60;rejectedText&#x60;) and for further customization using the yielded &#x60;isPending&#x60;, &#x60;isFulfilled&#x60;,
   * &#x60;isRejected&#x60; properties.
   *
   * The click event will not bubble up, unless you set &#x60;bubble&#x60; to true.
   *
   * @event onClick
   * @param {*} value
   * @public
   */

  /**
   * This will reset the state property to &#x27;default&#x27;, and with that the button&#x27;s label to defaultText
   *
   * @method resetState
   * @private
   */
  @action
  resetState() {
    this.state = &#x27;default&#x27;;
  }

  get text() {
    return this.args[&#x60;${this.state}Text&#x60;] || this.args.defaultText;
  }

  /**
   * @method click
   * @private
   */
  @action
  async handleClick(e) {
    const { bubble, onClick, preventConcurrency } = this.args;

    if (typeof onClick !== &#x27;function&#x27;) {
      return;
    }

    // Shouldn&#x27;t we prevent propagation regardless if &#x60;@onClick&#x60; is a function?
    if (!bubble) {
      e.stopPropagation();
    }

    if (preventConcurrency &amp;&amp; this.isPending) {
      return;
    }

    this.state = &#x27;pending&#x27;;

    try {
      await onClick(this.args.value);

      if (!this.isDestroyed) {
        this.state = &#x27;fulfilled&#x27;;
      }
    } catch (error) {
      if (!this.isDestroyed) {
        this.state = &#x27;rejected&#x27;;
      }

      throw error;
    }
  }

  constructor() {
    super(...arguments);
  }
}

    </pre>
</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="card">
        <div class="card-header">
          Classes
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Accordion.html">Components.Accordion</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.AccordionItem.html">Components.AccordionItem</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.AccordionItemBody.html">Components.AccordionItemBody</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.AccordionItemTitle.html">Components.AccordionItemTitle</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Alert.html">Components.Alert</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Button.html">Components.Button</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ButtonGroup.html">Components.ButtonGroup</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ButtonGroupButton.html">Components.ButtonGroupButton</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Carousel.html">Components.Carousel</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.CarouselSlide.html">Components.CarouselSlide</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Collapse.html">Components.Collapse</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ContextualHelp.html">Components.ContextualHelp</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ContextualHelpElement.html">Components.ContextualHelpElement</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Dropdown.html">Components.Dropdown</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.DropdownButton.html">Components.DropdownButton</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.DropdownMenu.html">Components.DropdownMenu</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.DropdownMenuDivider.html">Components.DropdownMenuDivider</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.DropdownMenuItem.html">Components.DropdownMenuItem</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.DropdownToggle.html">Components.DropdownToggle</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Form.html">Components.Form</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.FormElement.html">Components.FormElement</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControl.html">Components.FormElementControl</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControlCheckbox.html">Components.FormElementControlCheckbox</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControlInput.html">Components.FormElementControlInput</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControlRadio.html">Components.FormElementControlRadio</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControlSwitch.html">Components.FormElementControlSwitch</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementControlTextarea.html">Components.FormElementControlTextarea</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.FormElementLabel.html">Components.FormElementLabel</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.LinkComponent.html">Components.LinkComponent</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ListGroup.html">Components.ListGroup</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ListGroupItem.html">Components.ListGroupItem</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Modal.html">Components.Modal</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ModalBody.html">Components.ModalBody</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ModalDialog.html">Components.ModalDialog</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ModalFooter.html">Components.ModalFooter</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ModalHeader.html">Components.ModalHeader</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ModalHeaderClose.html">Components.ModalHeaderClose</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.ModalHeaderTitle.html">Components.ModalHeaderTitle</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ModalSimple.html">Components.ModalSimple</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Nav.html">Components.Nav</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Navbar.html">Components.Navbar</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.NavbarContent.html">Components.NavbarContent</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.NavbarLinkTo.html">Components.NavbarLinkTo</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.NavbarNav.html">Components.NavbarNav</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.NavbarToggle.html">Components.NavbarToggle</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.NavItem.html">Components.NavItem</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Popover.html">Components.Popover</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.PopoverElement.html">Components.PopoverElement</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Progress.html">Components.Progress</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.ProgressBar.html">Components.ProgressBar</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Spinner.html">Components.Spinner</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Tab.html">Components.Tab</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.TabPane.html">Components.TabPane</a></li>
            <li class="list-group-item list-group-item-public"><a href="../classes/Components.Tooltip.html">Components.Tooltip</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Components.TooltipElement.html">Components.TooltipElement</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Mixins.ComponentChild.html">Mixins.ComponentChild</a></li>
            <li class="list-group-item list-group-item-private"><a href="../classes/Mixins.ComponentParent.html">Mixins.ComponentParent</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/yuidoc-bootstrap.js"></script>
<script>prettyPrint();</script>
</body>
</html>
