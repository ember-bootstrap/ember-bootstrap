{{! @glint-nocheck }}
{{#if @isOpen}}
  {{#if this._renderInPlace}}
    <div
      data-bs-popper
      class="dropdown-menu {{this.alignClass}} {{if this.isOpen "show"}}"
      tabindex="-1"
      ...attributes
      {{popper-tooltip @toggleElement this.popperOptions}}
      {{did-insert @registerChildElement "menu"}}
      {{will-destroy @unregisterChildElement "menu"}}
      {{did-update this.updateIsOpen @open}}
      {{create-ref "menuElement"}}
    >
      {{yield
        (hash
          item=(ensure-safe-component (bs-default @itemComponent (component "bs-dropdown/menu/item")))
          link-to=(ensure-safe-component (bs-default @linkToComponent (component "bs-link-to" attrClassInternal="dropdown-item")))
          linkTo=(ensure-safe-component (bs-default @linkToComponent (component "bs-link-to" attrClassInternal="dropdown-item")))
          divider=(ensure-safe-component (bs-default @dividerComponent (component "bs-dropdown/menu/divider")))
        )
      }}
    </div>
  {{else}}
    {{#in-element this.destinationElement insertBefore=null}}
      <div
        data-bs-popper
        class="dropdown-menu {{this.alignClass}} {{if this.isOpen "show"}}"
        tabindex="-1"
        ...attributes
        {{popper-tooltip @toggleElement this.popperOptions}}
        {{did-insert @registerChildElement "menu"}}
        {{will-destroy @unregisterChildElement "menu"}}
        {{did-update this.updateIsOpen @open}}
        {{create-ref "menuElement"}}
      >
        {{yield
          (hash
            item=(ensure-safe-component (bs-default @itemComponent (component "bs-dropdown/menu/item")))
            link-to=(ensure-safe-component (bs-default @linkToComponent (component "bs-link-to" attrClassInternal="dropdown-item")))
            linkTo=(ensure-safe-component (bs-default @linkToComponent (component "bs-link-to" attrClassInternal="dropdown-item")))
            divider=(ensure-safe-component (bs-default @dividerComponent (component "bs-dropdown/menu/divider")))
          )
        }}
      </div>
    {{/in-element}}
  {{/if}}
{{/if}}
